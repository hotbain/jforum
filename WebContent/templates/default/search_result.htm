<#include "header.htm"/>

<#--
	<style type="text/css">@import url( ${contextPath}/templates/${templateName}/styles/style.css?${startupTime} );</style>
	
-->
<style type="text/css">@import url( ${contextPath}/templates/${templateName}/styles/${language}.css?${startupTime} );</style>


<script type="text/javascript" src="${contextPath}/templates/${templateName}/js/pagination.js?${startupTime}"></script>

<#import "../macros/pagination.ftl" as topicPagination>
<#import "../macros/search_pagination.ftl" as pagination>
<#import "../macros/presentation.ftl" as presentation/>
<script type="text/javascript">
	$(function(){
		$("#search_result_input").focus();
	})
</script>
<table cellspacing="0" cellpadding="10" width="100%" align="center" border="0">
	<tr>
		<td class="bodyline" valign="top">
			<table cellspacing="2" cellpadding="2" width="100%" align="center" border="0">
				<tr>
					<td valign="bottom" align="left" colspan="2">
						<span class="maintitle">
							${I18n.getMessage("Search.searchResults")}:
							${totalRecords} 
							
							<#if (totalRecords == 1)>
								${I18n.getMessage("Search.recordFound")}
							<#else>
								${I18n.getMessage("Search.recordsFound")}
							</#if>
						</span>
						<br />
					</td>
				</tr>
				<tr>
					<td align="left" valign="middle">		  
						<a class="nav" href="${contextPath}/forums/list${extension}">${I18n.getMessage("ForumListing.forumIndex")}</a>
						
						<div>
							<div class="pull-left container">
												<form accept-charset="${encoding}" role="form" action="${JForumContext.encodeURL("/jforum")}" method="post" class="form-horizontal">
													<input type="hidden" name="module" value="search"/>
													<input type="hidden" name="action" value="search"/>
													<#if request.getParameter("forum")?exists>
														<input type="hidden" name="forum" value="${request.getParameter("forum")}">
													</#if>
													<input type="hidden" name="match_type" value="all">
														 <div class="form-group row has-success has-feedback">
															    <div class="col-sm-5">
																		<input id="search_result_input" type="search" value="${request.getParameter("search_keywords")}"  required placeholder="${I18n.getMessage("Search.Input.Required.placeHodler_Spec")}"  name="search_keywords" class="form-control"/>
															    		<span class="glyphicon glyphicon-search form-control-feedback"></span>
															    </div>
															     <div class="col-sm-4">
															     		<button type="submit" class="btn btn-success btn-medium" ><i class="glyphicon glyphicon-search"></i>&nbsp;${I18n.getMessage("ForumBase.search")}</button>
															    </div>
															    
								  						</div>
												</form>
							</div>
						</div>
					</td>
					<td class="nav" valign="bottom" nowrap="nowrap" align="right">
						<#assign paginationLinks>
							<@pagination.searchPagination/>
						</#assign>

						${paginationLinks}
					</td>
				</tr>
			</table>

			<table class="table table-hover table-bordered" cellspacing="2" cellpadding="5" width="100%" border="0">
				<#if results.size() == 0>
					<tr>
						<td class="gen">
							${I18n.getMessage("Search.noResults")} <a href="${JForumContext.encodeURL("/search/filters")}">${I18n.getMessage("Search.clickHere")}</a> ${I18n.getMessage("Search.newSearch")}
						</td>
					</tr>
				<#else>
					<#list results as post>
						<tr class="success">
							<td class="">
								<#assign postUrl = JForumContext.encodeURL("/posts/preList/${post.topicId}/${post.id}")/>
								<div >
									
									<strong>
										<a href="${postUrl}">${post.subject?html}</a>
									</strong>
									<div class="pull-right" >
										${I18n.getMessage("Search.postedOn")} <a href="${JForumContext.encodeURL("/forums/show/${post.forum.id}")}">${post.forum.name}</a>, 
										${I18n.getMessage("Search.postedAt")} <span class="badge">${post.time?date}</span>, 
										${I18n.getMessage("Search.postedBy")} <a href="${JForumContext.encodeURL("/user/profile/${post.userId}")}"><label class="label label-success">${post.postUsername}</label></a>					
									</div>
													
								</div>
								
							</td>
						</tr>

						<tr class="">
							<td class="row1 gen">
								${post.text}
								<br />
								<div align="right"><a href="${postUrl}">${I18n.getMessage("Search.viewMessage")}</a></div>
							</td>
						</tr>

						<#--
						<tr>
							<td height="3" colspan="2" class="spacerow"><img width="1" height="1" alt="" src="${contextPath}/templates/${templateName}/images/spacer.gif"/>
									<div align="left"><a href="${postUrl}">${postUrl}</a></div>
							</td>
						</tr>
						-->
					</#list>
				</#if>
			</table>

			<table cellspacing="2" cellpadding="2" width="100%" align="center" border="0">
				<tr>
					<td align="left" valign="middle">
						<span class="nav">
		  					<a class="nav" href="${contextPath}/forums/list${extension}">${I18n.getMessage("ForumListing.forumIndex")}</a>
						</span>
					</td>
					<td valign="middle" nowrap="nowrap" align="right">
						${paginationLinks}
					</td>
				</tr>
				<tr>
					<td align="left" colspan="2"></td>
				</tr>
			</table>

			<table cellspacing="0" cellpadding="0" width="100%" border="0">
				<tr>
					<td align="right">
						<table cellspacing="0" cellpadding="0" border="0">
							<tr>
								<td nowrap="nowrap">
									<form action="" accept-charset="${encoding}" name="f">
										<span class="gensmall">${I18n.getMessage("ForumIndex.goTo")}:&nbsp;
											<select onchange="if(this.options[this.selectedIndex].value != -1){ document.location = '${contextPath}/forums/show/'+ this.options[this.selectedIndex].value +'${extension}'; }" name="select">
												<option value="-1" selected="selected">${I18n.getMessage("ForumIndex.goToSelectAForum")}</option>

												<#list categories as category>
													<optgroup label="${category.name}">
														<#list category.getForums() as forum>
														<option value="${forum.id}">${forum.name}</option>
														</#list>
													</optgroup>
												</#list>
											</select>				  
											&nbsp;
											<input class="liteoption" type="button" value="${I18n.getMessage("ForumIndex.goToGo")}" onclick="if(document.f.select.options[document.f.select.selectedIndex].value != -1){ document.location = '${contextPath}/forums/show/'+ document.f.select.options[document.f.select.selectedIndex].value +'${extension}'; }" />
										</span>
									</form>
								</td>
							</tr>
						</table>
					</td>
				</tr>
			</table>
		</td>
	</tr>
</table>
<#include "bottom.htm"/>
